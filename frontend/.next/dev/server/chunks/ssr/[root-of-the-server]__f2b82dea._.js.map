{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/frontend/lib/directus.ts"],"sourcesContent":["import { createDirectus, rest, staticToken } from '@directus/sdk';\n\n// Use /api instead of localhost:8055 - goes through Next.js proxy\nconst directus = createDirectus(process.env.NEXT_PUBLIC_DIRECTUS_URL || 'http://localhost:5000')\n    .with(process.env.NEXT_PUBLIC_DIRECTUS_TOKEN ? staticToken(process.env.NEXT_PUBLIC_DIRECTUS_TOKEN) : (client) => client)\n    .with(rest());\n\nexport default directus;\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;AAEA,kEAAkE;AAClE,MAAM,WAAW,IAAA,qKAAc,EAAC,6DAAwC,yBACnE,IAAI,CAAC,QAAQ,GAAG,CAAC,0BAA0B,GAAG,IAAA,0KAAW,EAAC,QAAQ,GAAG,CAAC,0BAA0B,IAAI,CAAC,SAAW,QAChH,IAAI,CAAC,IAAA,uKAAI;uCAEC"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/frontend/app/actu/%5Bslug%5D/page.tsx"],"sourcesContent":["import directus from '@/lib/directus';\nimport { readItems } from '@directus/sdk';\nimport Link from 'next/link';\nimport { notFound } from 'next/navigation';\n\ntype Post = {\n  id: number;\n  title: string;\n  slug: string;\n  content?: string | null;\n  excerpt?: string | null;\n  published_at?: string | null;\n  status?: string | null;\n  category?: string | number | null;\n  featured_picture?: string | null;\n  seo?: any;\n};\n\nexport const revalidate = 0; // always fetch fresh\nexport const dynamic = 'force-dynamic';\nexport const fetchCache = 'force-no-store';\n\nasync function fetchPost(slug: string): Promise<Post | null> {\n  try {\n    const posts = await directus.request(\n      readItems('posts', {\n        fields: [\n          'id',\n          'title',\n          'slug',\n          'content',\n          'excerpt',\n          'published_at',\n          'status',\n          'category',\n          'featured_picture',\n          'seo',\n        ],\n        filter: { slug: { _eq: slug }, status: { _eq: 'published' } },\n        limit: 1,\n      })\n    );\n    if (!posts || !posts.length) return null;\n    return posts[0] as Post;\n  } catch (e) {\n    console.warn('Failed to fetch post', e);\n    return null;\n  }\n}\n\nfunction formatDate(dateStr?: string | null) {\n  if (!dateStr) return '';\n  return new Intl.DateTimeFormat('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' }).format(new Date(dateStr));\n}\n\nfunction getAssetUrl(fileId?: string | null) {\n  if (!fileId) return null;\n  return `/assets/${fileId}`;\n}\n\nexport default async function ArticlePage({ params }: { params: Promise<{ slug: string }> }) {\n  const { slug: rawSlug } = await params;\n  let slug = rawSlug;\n  try {\n    slug = decodeURIComponent(rawSlug);\n  } catch {\n    // keep raw slug if decoding fails\n  }\n  const post = await fetchPost(slug);\n  if (!post) {\n    notFound();\n  }\n  const date = post.published_at;\n  const image = getAssetUrl(post.featured_picture);\n  const seo = post.seo || {};\n\n  return (\n    <>\n      <section className=\"page-header\">\n        <div className=\"container\">\n          <p className=\"page-subtitle\">\n            <Link href=\"/actu\" className=\"nav-link\">\n              ← Retour aux actualités\n            </Link>\n          </p>\n          <h1 className=\"page-title\">{post.title}</h1>\n          {date && <p className=\"page-subtitle\">{formatDate(date)}</p>}\n        </div>\n      </section>\n\n      <section className=\"news\">\n        <div className=\"container\">\n          <article className=\"news-article\">\n            {image && (\n              <div className=\"article-image\">\n                <img src={image} alt={post.title} style={{ width: '100%', borderRadius: '8px', marginBottom: '16px' }} />\n              </div>\n            )}\n            <div className=\"article-content\">\n              {post.content ? (\n                <div className=\"article-full\" dangerouslySetInnerHTML={{ __html: post.content }} />\n              ) : (\n                <p>Contenu à venir.</p>\n              )}\n            </div>\n          </article>\n        </div>\n      </section>\n\n      {seo && (\n        <script\n          type=\"application/ld+json\"\n          suppressHydrationWarning\n          dangerouslySetInnerHTML={{ __html: JSON.stringify(seo) }}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AAAA;;;;;;AAeO,MAAM,aAAa,GAAG,qBAAqB;AAC3C,MAAM,UAAU;AAChB,MAAM,aAAa;AAE1B,eAAe,UAAU,IAAY;IACnC,IAAI;QACF,MAAM,QAAQ,MAAM,0HAAQ,CAAC,OAAO,CAClC,IAAA,2LAAS,EAAC,SAAS;YACjB,QAAQ;gBACN;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACD,QAAQ;gBAAE,MAAM;oBAAE,KAAK;gBAAK;gBAAG,QAAQ;oBAAE,KAAK;gBAAY;YAAE;YAC5D,OAAO;QACT;QAEF,IAAI,CAAC,SAAS,CAAC,MAAM,MAAM,EAAE,OAAO;QACpC,OAAO,KAAK,CAAC,EAAE;IACjB,EAAE,OAAO,GAAG;QACV,QAAQ,IAAI,CAAC,wBAAwB;QACrC,OAAO;IACT;AACF;AAEA,SAAS,WAAW,OAAuB;IACzC,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QAAE,KAAK;QAAW,OAAO;QAAQ,MAAM;IAAU,GAAG,MAAM,CAAC,IAAI,KAAK;AAC9G;AAEA,SAAS,YAAY,MAAsB;IACzC,IAAI,CAAC,QAAQ,OAAO;IACpB,OAAO,CAAC,QAAQ,EAAE,QAAQ;AAC5B;AAEe,eAAe,YAAY,EAAE,MAAM,EAAyC;IACzF,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM;IAChC,IAAI,OAAO;IACX,IAAI;QACF,OAAO,mBAAmB;IAC5B,EAAE,OAAM;IACN,kCAAkC;IACpC;IACA,MAAM,OAAO,MAAM,UAAU;IAC7B,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ;IACV;IACA,MAAM,OAAO,KAAK,YAAY;IAC9B,MAAM,QAAQ,YAAY,KAAK,gBAAgB;IAC/C,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC;IAEzB,qBACE;;0BACE,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCACX,cAAA,8OAAC,0LAAI;gCAAC,MAAK;gCAAQ,WAAU;0CAAW;;;;;;;;;;;sCAI1C,8OAAC;4BAAG,WAAU;sCAAc,KAAK,KAAK;;;;;;wBACrC,sBAAQ,8OAAC;4BAAE,WAAU;sCAAiB,WAAW;;;;;;;;;;;;;;;;;0BAItD,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAQ,WAAU;;4BAChB,uBACC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,KAAK;oCAAO,KAAK,KAAK,KAAK;oCAAE,OAAO;wCAAE,OAAO;wCAAQ,cAAc;wCAAO,cAAc;oCAAO;;;;;;;;;;;0CAGxG,8OAAC;gCAAI,WAAU;0CACZ,KAAK,OAAO,iBACX,8OAAC;oCAAI,WAAU;oCAAe,yBAAyB;wCAAE,QAAQ,KAAK,OAAO;oCAAC;;;;;yDAE9E,8OAAC;8CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOZ,qBACC,8OAAC;gBACC,MAAK;gBACL,wBAAwB;gBACxB,yBAAyB;oBAAE,QAAQ,KAAK,SAAS,CAAC;gBAAK;;;;;;;;AAKjE"}}]
}